{"uuid": "08c97c0d-a133-4882-9032-76088739e581", "tags": ["Garcia", "RNA-Maturation"], "format-version": "0.1", "name": "GARCIA: Mature RNA Abundance Analysis Helper 3 (mapping locs)", "version": 18, "steps": {"0": {"tool_id": null, "tool_version": null, "outputs": [], "workflow_outputs": [{"output_name": "output", "uuid": "3bca0c60-cbcf-446d-addf-d346667369fb", "label": null}], "input_connections": {}, "tool_state": "{\"collection_type\": \"list\"}", "id": 0, "uuid": "3b0b72ed-64ef-4b02-aa83-4d4e4bc7e00a", "errors": null, "name": "Input dataset collection", "label": "BAM File Collection", "inputs": [], "position": {"top": 293, "left": 101}, "annotation": "", "content_id": null, "type": "data_collection_input"}, "1": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_text_file_with_recurring_lines/1.1.0", "tool_version": "1.1.0", "outputs": [{"type": "txt", "name": "outfile"}], "workflow_outputs": [], "input_connections": {}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"token_set\": \"[{\\\"__index__\\\": 0, \\\"line\\\": \\\"dummy\\\", \\\"repeat_select\\\": {\\\"__current_case__\\\": 0, \\\"repeat_select_opts\\\": \\\"user\\\", \\\"times\\\": \\\"1\\\"}}]\"}", "id": 1, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "036faa0b-3d4c-452c-975f-c50cebba35ef", "errors": null, "name": "Create text file", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutfile": {"output_name": "outfile", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 736, "left": 140}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_text_file_with_recurring_lines/1.1.0", "type": "tool"}, "2": {"tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.9", "tool_version": "1.9", "outputs": [{"type": "input", "name": "outputsam"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "output", "id": 0}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"cond_subsample\": \"{\\\"__current_case__\\\": 2, \\\"select_subsample\\\": \\\"no\\\"}\", \"cond_filter\": \"{\\\"__current_case__\\\": 1, \\\"select_filter\\\": \\\"no\\\"}\", \"outtype\": \"\\\"sam\\\"\", \"addref_cond\": \"{\\\"__current_case__\\\": 0, \\\"addref_select\\\": \\\"no\\\"}\", \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"adv_output\": \"{\\\"collapsecigar\\\": \\\"false\\\", \\\"header\\\": \\\"\\\", \\\"outputpassing\\\": \\\"false\\\"}\"}", "id": 2, "tool_shed_repository": {"owner": "iuc", "changeset_revision": "fdc58a0cc1d4", "name": "samtools_view", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "a3dcbccb-f146-4bc6-8c0a-fdcdbd724037", "errors": null, "name": "Samtools view", "post_job_actions": {"ChangeDatatypeActionoutputsam": {"output_name": "outputsam", "action_type": "ChangeDatatypeAction", "action_arguments": {"newtype": "tabular"}}, "HideDatasetActionoutputsam": {"output_name": "outputsam", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutputsam": {"output_name": "outputsam", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 293, "left": 419}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.9", "type": "tool"}, "3": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"infile": {"output_name": "outfile", "id": 1}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"code\": \"\\\"{ printf(\\\\\\\"# id: \\\\\\\\x27map_loc_counts\\\\\\\\x27\\\\\\\\n# section_name: \\\\\\\\x27Mapping locations summary\\\\\\\\x27\\\\\\\\n# description: \\\\\\\\x27Counts of reads per location bin, sorted by count\\\\\\\\x27\\\\\\\\n# format: \\\\\\\\x27tsv\\\\\\\\x27\\\\\\\\n# plot_type: \\\\\\\\x27bargraph\\\\\\\\x27\\\\\\\\n# pconfig:\\\\\\\\n#    id: \\\\\\\\x27map_loc_counts_header\\\\\\\\x27\\\\\\\\n#    title: \\\\\\\\x27Mapping Location Histogram\\\\\\\\x27\\\\\\\\n#    ylab: \\\\\\\\x27Read Count\\\\\\\\x27\\\\\\\\n\\\\\\\") }\\\"\", \"infile\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 3, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "f5e182ce-dc69-439b-9e6c-c49418bc0b48", "errors": null, "name": "Text reformatting", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutfile": {"output_name": "outfile", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": "Create MultiQC bargraph header", "inputs": [], "position": {"top": 717, "left": 419}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "type": "tool"}, "4": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_cut_tool/1.1.0", "tool_version": "1.1.0", "outputs": [{"type": "tabular", "name": "output"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "outputsam", "id": 2}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"cut_type_options\": \"{\\\"__current_case__\\\": 0, \\\"cut_element\\\": \\\"-f\\\", \\\"list\\\": \\\"3,4\\\"}\", \"delimiter\": \"\\\"\\\"\", \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"complement\": \"\\\"\\\"\"}", "id": 4, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "c2d79faf-4447-4276-8286-1563a982eb52", "errors": null, "name": "Cut", "post_job_actions": {"HideDatasetActionoutput": {"output_name": "output", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutput": {"output_name": "output", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 342, "left": 773}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_cut_tool/1.1.0", "type": "tool"}, "5": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_column/1.1.3", "tool_version": "1.1.3", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"infile": {"output_name": "output", "id": 4}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"replacements\": \"[{\\\"__index__\\\": 0, \\\"column\\\": \\\"2\\\", \\\"find_pattern\\\": \\\"[0-9][0-9][0-9]$\\\", \\\"replace_pattern\\\": \\\"000\\\"}]\", \"infile\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 5, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "2698a2ba-8a03-43bf-9c5e-a54fde810dd8", "errors": null, "name": "Replace Text", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutfile": {"output_name": "outfile", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 372, "left": 1055}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_column/1.1.3", "type": "tool"}, "6": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_uniq_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"infile": {"output_name": "outfile", "id": 5}}, "tool_state": "{\"skipfields\": \"\\\"0\\\"\", \"__page__\": null, \"__rerun_remap_job_id__\": null, \"ignorecase\": \"\\\"false\\\"\", \"infile\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"grouping\": \"{\\\"__current_case__\\\": 0, \\\"count\\\": \\\"true\\\", \\\"grouping_select\\\": \\\"no\\\", \\\"repeated\\\": \\\"false\\\", \\\"uniqueonly\\\": \\\"false\\\"}\"}", "id": 6, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "da2b6055-7c08-4054-8d79-b12f32709c8d", "errors": null, "name": "Unique lines", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutfile": {"output_name": "outfile", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 515, "left": 125}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_uniq_tool/1.1.1", "type": "tool"}, "7": {"tool_id": "sort1", "tool_version": "1.1.0", "outputs": [{"type": "input", "name": "out_file1"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "outfile", "id": 6}}, "tool_state": "{\"__page__\": null, \"style\": \"\\\"num\\\"\", \"column\": \"\\\"1\\\"\", \"__rerun_remap_job_id__\": null, \"column_set\": \"[]\", \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"header_lines\": \"\\\"0\\\"\", \"order\": \"\\\"DESC\\\"\"}", "id": 7, "uuid": "c1aba6ab-de08-4437-acb3-5e377a516770", "errors": null, "name": "Sort", "post_job_actions": {"DeleteIntermediatesActionout_file1": {"output_name": "out_file1", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}, "HideDatasetActionout_file1": {"output_name": "out_file1", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 564, "left": 417}, "annotation": "", "content_id": "sort1", "type": "tool"}, "8": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [{"output_name": "outfile", "uuid": "febafb56-f045-4b5d-8b65-76f0436572ea", "label": "mapping_locs_data"}], "input_connections": {"infile": {"output_name": "out_file1", "id": 7}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"code\": \"\\\"{ if( $2 == \\\\\\\"*\\\\\\\" ) { print \\\\\\\"Unmapped\\\\\\\", $1 } else { print $2 \\\\\\\":\\\\\\\" $3, $1}  }\\\"\", \"infile\": \"{\\\"__class__\\\": \\\"RuntimeValue\\\"}\"}", "id": 8, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "42f96685-4c43-4b95-8fd2-1e93476ec1e4", "errors": null, "name": "Text reformatting", "post_job_actions": {"RenameDatasetActionoutfile": {"output_name": "outfile", "action_type": "RenameDatasetAction", "action_arguments": {"newname": "Mapping Locations Data"}}}, "label": null, "inputs": [{"name": "infile", "description": "runtime parameter for tool Text reformatting"}], "position": {"top": 594, "left": 699}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "type": "tool"}, "9": {"tool_id": "Show beginning1", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "out_file1"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "outfile", "id": 8}}, "tool_state": "{\"__page__\": null, \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"__rerun_remap_job_id__\": null, \"lineNum\": \"\\\"9\\\"\"}", "id": 9, "uuid": "2ac7ceb9-5d2b-408b-984a-dfe041a6fb3b", "errors": null, "name": "Select first", "post_job_actions": {"DeleteIntermediatesActionout_file1": {"output_name": "out_file1", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}, "HideDatasetActionout_file1": {"output_name": "out_file1", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "Get the top 9 mapping locations", "inputs": [], "position": {"top": 519, "left": 995}, "annotation": "", "content_id": "Show beginning1", "type": "tool"}, "10": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"infile": {"output_name": "outfile", "id": 8}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"code\": \"\\\"BEGIN { sum=0;locs=0;cnt=0 } { cnt=cnt+1; if( cnt > 9 ) { locs=locs+1;sum=sum+$2 } } END { print locs \\\\\\\"_other_locations\\\\\\\", sum }\\\"\", \"infile\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 10, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "e487395a-441b-494e-9a43-b41656ca90ea", "errors": null, "name": "Text reformatting", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}, "DeleteIntermediatesActionoutfile": {"output_name": "outfile", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}}, "label": "Sum all but top 9 mapping location abundances", "inputs": [], "position": {"top": 675, "left": 991}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "type": "tool"}, "11": {"tool_id": "cat1", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "out_file1"}], "workflow_outputs": [], "input_connections": {"input1": {"output_name": "out_file1", "id": 9}, "queries_0|input2": {"output_name": "outfile", "id": 10}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"input1\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"queries\": \"[{\\\"__index__\\\": 0, \\\"input2\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}]\"}", "id": 11, "uuid": "09023cd1-550d-4032-be67-b69afd35a912", "errors": null, "name": "Concatenate datasets", "post_job_actions": {"DeleteIntermediatesActionout_file1": {"output_name": "out_file1", "action_type": "DeleteIntermediatesAction", "action_arguments": {}}, "HideDatasetActionout_file1": {"output_name": "out_file1", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 933, "left": 401.5}, "annotation": "", "content_id": "cat1", "type": "tool"}, "12": {"tool_id": "cat1", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "out_file1"}], "workflow_outputs": [], "input_connections": {"input1": {"output_name": "outfile", "id": 3}, "queries_0|input2": {"output_name": "out_file1", "id": 11}}, "tool_state": "{\"__page__\": null, \"__rerun_remap_job_id__\": null, \"input1\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"queries\": \"[{\\\"__index__\\\": 0, \\\"input2\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}]\"}", "id": 12, "uuid": "295daa9a-088f-4f93-a11f-f89586b2a79c", "errors": null, "name": "Concatenate datasets", "post_job_actions": {"RenameDatasetActionout_file1": {"output_name": "out_file1", "action_type": "RenameDatasetAction", "action_arguments": {"newname": "Mapping Locations Summary Data"}}, "HideDatasetActionout_file1": {"output_name": "out_file1", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 963, "left": 703.5}, "annotation": "", "content_id": "cat1", "type": "tool"}, "13": {"tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.7", "tool_version": "1.7", "outputs": [{"type": "input", "name": "stats"}, {"type": "html", "name": "html_report"}], "workflow_outputs": [{"output_name": "html_report", "uuid": "5278eb70-e2af-47b6-803b-e909b104fbc1", "label": "Mapping Locations Summary"}], "input_connections": {"results_0|software_cond|input": {"output_name": "out_file1", "id": 12}}, "tool_state": "{\"comment\": \"\\\"\\\"\", \"__page__\": null, \"title\": \"\\\"\\\"\", \"__rerun_remap_job_id__\": null, \"results\": \"[{\\\"__index__\\\": 0, \\\"software_cond\\\": {\\\"__current_case__\\\": 30, \\\"description\\\": \\\"\\\", \\\"input\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}, \\\"plot_type\\\": \\\"bargraph\\\", \\\"section_name\\\": \\\"\\\", \\\"software\\\": \\\"custom_content\\\", \\\"title\\\": \\\"\\\", \\\"xlab\\\": \\\"\\\", \\\"ylab\\\": \\\"\\\"}}]\", \"saveLog\": \"\\\"false\\\"\"}", "id": 13, "tool_shed_repository": {"owner": "iuc", "changeset_revision": "161f4383df15", "name": "multiqc", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "97ce0e67-f78b-4242-ae4a-10f24c80d5a9", "errors": null, "name": "MultiQC", "post_job_actions": {"RenameDatasetActionhtml_report": {"output_name": "html_report", "action_type": "RenameDatasetAction", "action_arguments": {"newname": "Mapping Locations Summary"}}, "HideDatasetActionstats": {"output_name": "stats", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 1022, "left": 1008}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.7", "type": "tool"}}, "annotation": "", "a_galaxy_workflow": "true"}